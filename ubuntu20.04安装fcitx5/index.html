<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=zh-CN lang=zh-cn><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>Ubuntu20.04安装fcitx5 &#183; Vee's space</title><meta name=description content><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/print.css media=print><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/poole.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/syntax.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><link href=https://vee-zhang.github.io/ubuntu20.04%E5%AE%89%E8%A3%85fcitx5/index.md rel=alternate type=text/plain title="Vee's space"></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vee-zhang.github.io><h1>Vee's space</h1></a><p class=lead>关于 DoIt 主题</p></div><nav><ul class=sidebar-nav><li><a href=https://vee-zhang.github.io>Home</a></li><li><a href=/posts/>所有文章</a></li><li><a href=/tags/>标签</a></li><li><a href=/categories/>分类</a></li><li><a href=/series/>系列</a></li><li><a href=/about/>关于</a></li></ul></nav><p>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</p></div></aside><main class="content container"><div class=post><h1>Ubuntu20.04安装fcitx5</h1><time datetime=2022-07-12T15:57:22+0800 class=post-date>Tue, Jul 12, 2022</time><p>主要参考了<a href=https://ouyen.github.io/fcitx5-ubuntu/>这篇文章</a>,感谢原作！</p><h2 id=安装>安装</h2><h3 id=安装flatpak>安装flatpak</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo add-apt-repository ppa:flatpak/stable
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install flatpak
</span></span><span class=line><span class=cl>sudo apt install gnome-software-plugin-flatpak
</span></span><span class=line><span class=cl>flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
</span></span><span class=line><span class=cl>sudo reboot
</span></span></code></pre></td></tr></table></div></div><h3 id=安装flatub仓库>安装flatub仓库</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 添加 flatub 仓库, fcitx5-unstable 也会依赖一些这个仓库中的运行时软件包。
</span></span><span class=line><span class=cl>flatpak remote-add --user --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo
</span></span><span class=line><span class=cl># 可选部分: 如果你想要使用不稳定版本的fcitx5，也可以添加 fcitx5 非稳定仓库。
</span></span><span class=line><span class=cl># flatpak remote-add --user --if-not-exists fcitx5-unstable https://flatpak.fcitx-im.org/unstable-repo/fcitx5-unstable.flatpakrepo
</span></span></code></pre></td></tr></table></div></div><p>这个安装完之后，桌面会出现一个另一个应用市场。</p><h3 id=安装fcitx5>安装fcitx5</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 如果您使用的是旧版flatpak，在安装的时候会需要显示的指定软件仓库名字: flatpak install flathub org.fcitx.Fcitx5
</span></span><span class=line><span class=cl>flatpak install org.fcitx.Fcitx5
</span></span><span class=line><span class=cl># 中文输入法引擎
</span></span><span class=line><span class=cl>flatpak install org.fcitx.Fcitx5.Addon.ChineseAddons 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 日文输入法（不用装）
</span></span><span class=line><span class=cl># flatpak install org.fcitx.Fcitx5.Addon.Mozc			 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 安装fcitx5服务，好像是这么个意思
</span></span><span class=line><span class=cl>sudo apt install fcitx5-frontend-gtk2 fcitx5-frontend-gtk3 fcitx5-frontend-qt5
</span></span></code></pre></td></tr></table></div></div><p>这里日文输入不用安装。</p><h3 id=配置环境变量>配置环境变量</h3><p>编辑<code>~/.profile</code>，加入：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>export XMODIFIERS=@im=fcitx
</span></span><span class=line><span class=cl>export GTK_IM_MODULE=fcitx
</span></span><span class=line><span class=cl>export QT_IM_MODULE=fcitx
</span></span></code></pre></td></tr></table></div></div><p>然后重启。</p><h3 id=配置开机自启>配置开机自启</h3><h3 id=安装主题>安装主题</h3><p>我使用这个<a href=https://github.com/hosxy/Fcitx5-Material-Color>主题</a>，蛮漂亮的，README里面有详细的安装方法。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git clone https://github.com/hosxy/Fcitx5-Material-Color.git ~/.local/share/fcitx5/themes/Material-Color
</span></span><span class=line><span class=cl>cd ~/.local/share/fcitx5/themes/Material-Color
</span></span><span class=line><span class=cl>ln -sf ./theme-teal.conf theme.conf
</span></span></code></pre></td></tr></table></div></div><h3 id=安装词库>安装词库</h3><p><a href=https://github.com/outloudvi/mw2fcitx/releases/tag/20220114>萌娘百科词库</a></p><p><a href=https://github.com/felixonmars/fcitx5-pinyin-zhwiki/releases/tag/0.2.3>维基百科词库</a></p><p>下载*.dict文件, 放置到 ~/.local/share/fcitx5/pinyin/dictionaries</p><h2 id=faq>FAQ</h2><h3 id=钉钉不能输入中文>钉钉不能输入中文</h3><p>找了钉钉的技术客服，教了我一招，可以参考<a href=https://linuxacme.cn/559>这里</a>对fcitx5的配置，但是我这里还不一样。</p><p>编辑<code>/opt/apps/com.alibabainc.dingtalk/files/Elevator.sh</code>文件，在文件声明<code>#！/bin/bin/sh</code>下面加入如下内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>export GTK_IM_MODULE DEFAULT=fcitx
</span></span><span class=line><span class=cl>export QT_IM_MODULE DEFAULT=fcitx
</span></span><span class=line><span class=cl>export XMODIFIERS DEFAULT=@im=fcitx
</span></span><span class=line><span class=cl>export INPUT_METHOD DEFAULT=fcitx
</span></span><span class=line><span class=cl>export SDL_IM_MODULE DEFAULT=fcitx
</span></span><span class=line><span class=cl>export QT_QPA_PLATFORM=xcb
</span></span></code></pre></td></tr></table></div></div><p>然后重启钉钉即可。</p><p>之后电脑重启，老毛病又犯了，然后我又去撩了阿里的大佬，得到了解决办法，打开fcitx5的<code>配置->全局选项->行为->勾选“默认状态为激活”->共享输入状态选“所有”</code>,一套下来搞定！！</p><h3 id=喷脑浆intellij系列ide输入问题>喷脑浆IntelliJ系列IDE输入问题</h3><p>此问题的根本原因是 IDE 附带的 JBR 不正确，要处理此问题，需要：</p><ol><li>前往 <a href=https://github.com/RikudouPatrickstar/JetBrainsRuntime-for-Linux-x64/releases>这里</a> 下载 jbr 并解压到任意路径</li><li>更改 IDE 的 JBR,启动IDE后快捷键ctrl+shift+A , 输入 <code>Choose Boot Java Runtime for the IDE</code>，选择Add Custom Runtime option，选择解压出的文件夹。</li></ol></div></main></body></html>