<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=zh-CN lang=zh-cn><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>AMS &#183; Vee's space</title><meta name=description content><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/print.css media=print><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/poole.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/syntax.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><link href=https://vee-zhang.github.io/ams/index.md rel=alternate type=text/plain title="Vee's space"></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vee-zhang.github.io><h1>Vee's space</h1></a><p class=lead>关于 DoIt 主题</p></div><nav><ul class=sidebar-nav><li><a href=https://vee-zhang.github.io>Home</a></li><li><a href=/posts/>所有文章</a></li><li><a href=/tags/>标签</a></li><li><a href=/categories/>分类</a></li><li><a href=/series/>系列</a></li><li><a href=/about/>关于</a></li></ul></nav><p>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</p></div></aside><main class="content container"><div class=post><h1>AMS</h1><time datetime=2021-08-09T15:48:25+0800 class=post-date>Mon, Aug 9, 2021</time><h3 id=概述>概述</h3><p>ActivityManagerService诞生自SystemServer，主要负责四大组件的启动、切换、调度以及应用进程的管理和调度工作。</p><p>主要分为:</p><ul><li>服务代理：由ActivityManagerProxy实现，用于与Server端提供的系统服务进行IPC；</li><li>服务中枢：ActivityManagerNative继承自Binder并实现IActivityManager，它提供了服务接口和Binder接口的相互转化功能，并在内部存储服务代理对像，并提供了getDefault方法返回服务代理；</li><li>Client：由ActivityManager封装一部分服务接口供Client调用。ActivityManager内部通过调用ActivityManagerNative的getDefault方法，可以得到一ActivityManagerProxy对像的引用，进而通过该代理对像调用远程服务的方法；</li><li>Server: 由ActivityManagerService实现，提供Server端的系统服务。</li></ul><p><img src=AMS%E4%B8%8EGUI%E7%9A%84%E5%85%B3%E7%B3%BB.png alt=AMS与GUI的关系></p><p>实际上他就是个Binder,可以用来IPC</p><h3 id=hook点>Hook点</h3><p>binder天然带有调用者的身份信息uid和进程信息pid 。</p></div></main></body></html>