<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=zh-CN lang=zh-cn><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>Ubuntu22.04å®‰è£…é…ç½®repo &#183; Vee's space</title><meta name=description content><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/print.css media=print><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/poole.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/syntax.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><link href=https://vee-zhang.github.io/ubuntu22.04%E5%AE%89%E8%A3%85repo/index.md rel=alternate type=text/plain title="Vee's space"></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vee-zhang.github.io><h1>Vee's space</h1></a><p class=lead>å…³äº DoIt ä¸»é¢˜</p></div><nav><ul class=sidebar-nav><li><a href=https://vee-zhang.github.io>Home</a></li><li><a href=/posts/>æ‰€æœ‰æ–‡ç« </a></li><li><a href=/tags/>æ ‡ç­¾</a></li><li><a href=/categories/>åˆ†ç±»</a></li><li><a href=/series/>ç³»åˆ—</a></li><li><a href=/about/>å…³äº</a></li></ul></nav><p>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</p></div></aside><main class="content container"><div class=post><h1>Ubuntu22.04å®‰è£…é…ç½®repo</h1><time datetime=2022-06-29T20:01:30+0800 class=post-date>Wed, Jun 29, 2022</time><h2 id=å®‰è£…repo>å®‰è£…Repo</h2><h3 id=aptå®‰è£…ä¸æ¨è>aptå®‰è£…ï¼ˆä¸æ¨èï¼‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install repo
</span></span></code></pre></td></tr></table></div></div><p>å®æµ‹aptå®‰è£…éå¸¸æ–¹ä¾¿ï¼Œè€Œä¸”èƒ½è‡ªåŠ¨é…ç½®å¥½ç¯å¢ƒå˜é‡ã€‚ä½†æ˜¯ubuntu22.04LTSæºä¸Šçš„ç‰ˆæœ¬æ˜¯æ¯”è¾ƒæ—§ï¼Œå¯¹æˆ‘è¿™ç§æ–°æ½®å…šå¾ˆä¸å‹å¥½ã€‚</p><h3 id=ä¸‹è½½å®‰è£…>ä¸‹è½½å®‰è£…</h3><p>åœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªbinç›®å½•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mkdir ~/bin
</span></span></code></pre></td></tr></table></div></div><p>ä¸éœ€è¦ä¿®æ”¹ï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>export REPO=$(mktemp /tmp/repo.XXXXXXXXX)
</span></span><span class=line><span class=cl>curl -o ${REPO} https://storage.googleapis.com/git-repo-downloads/repo
</span></span><span class=line><span class=cl>gpg --recv-key 8BB9AD793E8E6153AF0F9A4416530D5E920F5C65
</span></span><span class=line><span class=cl>curl -s https://storage.googleapis.com/git-repo-downloads/repo.asc | gpg --verify - ${REPO} &amp;&amp; install -m 755 ${REPO} ~/bin/repo
</span></span></code></pre></td></tr></table></div></div><p>è¿™äº›å‘½ä»¤ä¼šè®¾ç½®ä¸€ä¸ª<strong>ä¸´æ—¶æ–‡ä»¶</strong>ï¼Œå°† Repo ä¸‹è½½åˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œå¹¶éªŒè¯æä¾›çš„å¯†é’¥æ˜¯å¦ä¸æ‰€éœ€çš„å¯†é’¥åŒ¹é…ã€‚å¦‚æœè¿™äº›æ­¥éª¤æˆåŠŸå®Œæˆï¼Œå°±ä¼šç»§ç»­è¿›è¡Œå®‰è£…ã€‚</p><blockquote><p>mktempå‘½ä»¤å¯æŸ¥çœ‹https://www.runoob.com/linux/linux-comm-mktemp.html</p></blockquote><p>è¿™ä¸€æ­¥æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œåœ¨<code>bin</code>ç›®å½•ä¸‹å°±ä¼šå‡ºç°ä¸€ä¸ª<code>repo</code>æ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸ªpythonå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬ç”¨ä»»ä½•ç¼–è¾‘å™¨æ‰“å¼€å®ƒï¼Œæ¯”å¦‚æˆ‘å–œæ¬¢vscodeï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cd ~/bin
</span></span><span class=line><span class=cl>code repo
</span></span></code></pre></td></tr></table></div></div><p>åœ¨æ–‡ä»¶é¡¶ç«¯ç¬¬ä¸€è¡Œæœ‰æ ¼å¼å£°æ˜ï¼Œæˆ‘ä¸‹è½½çš„repoç”¨çš„æ˜¯python2,ä½†æ˜¯æˆ‘çš„ubuntuåªå®‰è£…äº†python3,æ‰€ä»¥éœ€è¦æŠŠ2æ”¹æˆ3ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#!/usr/bin/env python
</span></span><span class=line><span class=cl>æ”¹ä¸ºï¼š
</span></span><span class=line><span class=cl>#!/usr/bin/env python3
</span></span></code></pre></td></tr></table></div></div><p>ä¹‹åï¼Œç”±äºrepoåœ¨åˆå§‹åŒ–æ—¶é»˜è®¤è®¿é—®googleåœ°å€ï¼Œé€Ÿåº¦éå¸¸æ…¢ï¼Œæ‰€ä»¥éœ€è¦æ”¹æˆæ¸…åçš„é•œåƒï¼Œåœ¨repoæ–‡ä»¶å†…æŠŠ<code>https://gerrit.googlesource.com/git-repo</code>æ›¿æ¢æˆ<code>https://mirrors.tuna.tsinghua.edu.cn/git/git-repo</code>ï¼Œå¹¶ä¿å­˜ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>REPO_URL = os.environ.get(&#39;REPO_URL&#39;, None)
</span></span><span class=line><span class=cl>if not REPO_URL:
</span></span><span class=line><span class=cl>  # REPO_URL = &#39;https://gerrit.googlesource.com/git-repo&#39;
</span></span><span class=line><span class=cl>  REPO_URL = &#39;https://mirrors.tuna.tsinghua.edu.cn/git/git-repo&#39;
</span></span><span class=line><span class=cl>REPO_REV = os.environ.get(&#39;REPO_REV&#39;)
</span></span><span class=line><span class=cl>if not REPO_REV:
</span></span><span class=line><span class=cl>  REPO_REV = &#39;stable&#39;
</span></span><span class=line><span class=cl># URL to file bug reports for repo tool issues.
</span></span><span class=line><span class=cl>BUG_URL = &#39;https://bugs.chromium.org/p/gerrit/issues/entry?template=Repo+tool+issue&#39;
</span></span></code></pre></td></tr></table></div></div><blockquote><p>Pythonæ˜¯ä¸€ç§å¼ºæ ¼å¼è¯­è¨€ï¼Œæ‰€ä»¥æ›¿æ¢çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ç¼©è¿›çš„ä½æ•°ä¸ä¹‹å‰ä¸€è‡´ã€‚</p></blockquote><p>æœ€åæŸ¥çœ‹ä¸€ä¸‹repoç‰ˆæœ¬å·ï¼ŒéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>repo version
</span></span></code></pre></td></tr></table></div></div><h2 id=ä¸‹è½½å®‰å“æºç >ä¸‹è½½å®‰å“æºç </h2><h3 id=åˆå§‹åŒ–repo>åˆå§‹åŒ–Repo</h3><p>åˆ›å»ºä¸€ä¸ªç©ºç›®å½•æ¥å­˜æ”¾æ‚¨çš„å·¥ä½œæ–‡ä»¶ã€‚ä¸ºå…¶æŒ‡å®šä¸€ä¸ªæ‚¨å–œæ¬¢çš„ä»»æ„åç§°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mkdir WORKING_DIRECTORY
</span></span><span class=line><span class=cl>cd WORKING_DIRECTORY
</span></span></code></pre></td></tr></table></div></div><p>gitéœ€è¦é…ç½®å…¨å±€åç§°å’Œé‚®ç®±ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git config --global user.name Your Name
</span></span><span class=line><span class=cl>git config --global user.email you@example.com
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡Œ<code>repo init</code>æ›´æ–°repo,å¹¶ä¸ºrepoæŒ‡å®šä¸€ä¸ªç½‘å€ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>repo init -u https://android.googlesource.com/platform/manifest
</span></span></code></pre></td></tr></table></div></div><p>æ®è¯´ä»googleä»“åº“ä¸‹è½½ä¼šéå¸¸æ…¢ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å¤±è´¥ï¼Œå¹¸å¥½å…¬å¸è¿™è¾¹å·²ç»æœ‰äº†ğŸ˜€ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>repo init -u &#34;git://10.53.131.102/platform/manifest&#34; -b android-9.0.0_r46   
</span></span></code></pre></td></tr></table></div></div><p>æœ€ååŒæ­¥Androidæºç ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>repo sync
</span></span></code></pre></td></tr></table></div></div><p>æ›´å¿«çš„æ–¹å¼ï¼ŒåŠ ä¸Šå‚æ•°:</p><ul><li>-c è¡¨ç¤ºä»å½“å‰åˆ†æ”¯åŒæ­¥</li><li>-j8 è¡¨ç¤ºå¯åŠ¨8ä¸ªçº¿ç¨‹å¹¶å‘åŒæ­¥</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>repo sync -c -j8
</span></span></code></pre></td></tr></table></div></div><p>æ‰§è¡Œä¹‹åï¼Œå‘ç°å¥½æ…¢ï¼ŒæŠ½çƒŸå»äº†ã€‚</p></div></main></body></html>