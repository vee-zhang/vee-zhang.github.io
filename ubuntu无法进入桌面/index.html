<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=zh-CN lang=zh-cn><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>Ubuntu无法进入桌面 &#183; Vee's space</title><meta name=description content><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/print.css media=print><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/poole.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/syntax.css><link type=text/css rel=stylesheet href=https://vee-zhang.github.iocss/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><link href=https://vee-zhang.github.io/ubuntu%E6%97%A0%E6%B3%95%E8%BF%9B%E5%85%A5%E6%A1%8C%E9%9D%A2/index.md rel=alternate type=text/plain title="Vee's space"></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vee-zhang.github.io><h1>Vee's space</h1></a><p class=lead>关于 DoIt 主题</p></div><nav><ul class=sidebar-nav><li><a href=https://vee-zhang.github.io>Home</a></li><li><a href=/posts/>所有文章</a></li><li><a href=/tags/>标签</a></li><li><a href=/categories/>分类</a></li><li><a href=/series/>系列</a></li><li><a href=/about/>关于</a></li></ul></nav><p>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</p></div></aside><main class="content container"><div class=post><h1>Ubuntu无法进入桌面</h1><time datetime=2022-07-13T14:47:30+0800 class=post-date>Wed, Jul 13, 2022</time><p>今天又弄了一下fcitx5,并且配置了go环境变量，然后重启了一下电脑，到了登录页面，输入密码，竟然又退到登录页面，无论如何也进不去桌面。</p><h2 id=解决步骤>解决步骤</h2><ol><li>插入ubuntu启动盘，从usb引导，进入ubuntu安装页面，选择try ubuntu.</li><li>试用方式会以u盘为根目录，进入到系统，此时就能进入桌面了。</li><li>不要急，想想最近干了什么事情，哪些与操作系统配置相关，比如我就干了如下危险操作：<ul><li>系统语言从英文切换到了中文，根目录保留了英文名称。（三天没出事，可以排除）；</li><li>安装了Fcitx5输入法，两天没事，但是今天在钉钉上不能切换中文，钉钉的技术帮我开了「默认激活」选项（严重怀疑）;</li><li>在格式化机械硬盘时强制重启了系统（系统装在ssd上，应该不会受影响）（轻度怀疑）；</li><li>安装了go环境，配置了环境变量（怀疑与系统自带的go冲突？）。</li></ul></li><li>然后选择其他位置，找到原来系统的根目录；</li><li>先从最熟悉的环境变量开始检查，发现在fcitx的配置上，多了个「ls」，但是这顶多导致一些报错，不会影响到系统，顺手改了</li><li>继续去看go的配置，发现<code>$PATH=$GO_HOME/bin</code>,总感觉少了什么，我擦，正常的PATH应该各目录拼接成的，我这样写就成了赋值，会清空PATH变量！！</li><li>修改成<code>$PATH=$GO_HOME/bin:$PATH</code>之后重启，可以正常进桌面了。</li></ol><h2 id=总结>总结</h2><ol><li>环境变量是个严谨的玩意，每次修改都需要慎重对待；</li><li>我喜欢在vscode里面修改.profile,但是每次打开文件后就不管了，导致.profile一直处于可编辑状态，这样十分危险，以后改完就关闭；</li><li>我喜欢将环境变量写在<code>~/.profile</code>文件中，这样一旦出错就会影响自己的用户系统。以后应该把环境变量写在<code>~/.bash_profile</code>中，这样只会影响终端，不至于出现连桌面都进不去的局面。</li></ol><h2 id=更新>更新</h2><p>解决桌面进不去的问题之后，发现钉钉又不能输入中文了，通过把fcitx5的配置还原回<code>.profile</code>，并且重启生效后，解决了这个问题。</p><p>看来不是什么环境变量都能写到<code>.bash_profile</code>的，比如fcitx5输入法的配置，就应该是用户系统全局生效的，而不是只在bash里面生效。</p></div></main></body></html>